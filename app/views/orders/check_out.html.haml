%section#cart_items
  .container
    .breadcrumbs
      %ol.breadcrumb
        %li
          = link_to 'Home', root_path
        %li.active Check out
    / /breadcrums
    .step-one
      %h2.heading Step1
    .checkout-options
      %h3 New User
      %p Checkout options
      = form_with url: "orders_path", method: :post do |form|
        %ul.nav
          %li
            = form.radio_button :customer, 'Register Account', checked: true 
            = form.label :customer_register, 'Register Account'
          %li
            = form.radio_button :customer, 'Guest Checkout'
            = form.label :customer_guest, 'Guest Checkout'
          %li
            %a{href: ""}
            %i.fa.fa-times
            Cancel
        .register-req
          %p Please use Register And Checkout to easily get access to your order history, or use Checkout as Guest
        .shopper-informations
          .row
            .col-sm-5.clearfix
              .bill-to
                %p Bill To
                .form-two
                  %form
                    = form.text_field :street, placeholder: 'Street', value: current_customer.street
                  %br
                  %br
                    = form.text_field :landmark, placeholder: 'Landmark', value: current_customer.landmark
                  %br
                    = form.text_field :pincode,  placeholder: 'Zip / Postal Code *', value: current_customer.pincode
                  %br
                    = form.select :city_id, options_for_select(city, @city&.name), value: current_customer.city_id
                  %br
                    = form.select :state_id, options_for_select(state, @state&.name), value: current_customer.state_id
                  %br
                    = form.select :country_id, options_for_select(country_name, @country&.name), value: current_customer.country_id
                  %br
                    = form.text_field :mobile,  placeholder: 'Mobile', value: current_customer.mobile
        .review-payment
          %h2 Review  Payment
        .table-responsive.cart_info
          %table.table.table-condensed
            %thead
              %tr.cart_menu
                %td.image Item
                %td.description Description
                %td.price Price
                %td.quantity Quantity
                %td.total Total
                %td.delete
            %tbody
              -current_customer.carts.each do |item|
                %tr
                  %td.cart_product
                    = link_to "" do
                      = image_tag url_for(item.product.cover_image), alt: "", size: "120x100"
                  %td.cart_description
                    %h6
                      %a(href="")=item.product.name
                  %td.cart_price
                    %p= "₹#{item.product.price}"
                  %td.cart_quantity
                    .cart_quantity_button
                      %a.cart_quantity_up{"data-cart-id" => "#{item.id}"}+
                      %input.cart_quantity_input{autocomplete: "off", "data-cart-id" => "#{item.id}", name: "quantity", size: "2", type: "text", value: "#{item.quantity.to_i}"}
                      %a.cart_quantity_down{"data-cart-id" => "#{item.id}"} -
                  %td.cart_total
                    %p.cart_total_price= "₹#{item.product.price * item.quantity.to_i}"
                  %td.cart_delete
                    = link_to cart_path(item), method: :delete, data: { confirm: 'Are you sure?' }, class: 'cart_quantity_delete' do
                      %i.fa.fa-times
        %section#do_action
          .container
            .row
              .col-sm-6
                .total_area
                  %ul
                    %li
                      Sub Total 
                      %span= "₹#{@total_cart_price}"
                    %li
                      Eco Tax
                      %span= "₹#{@eco_tax}"
                    %li
                      Shipping Cost
                      %span= @shipping_cost
                    %li
                      Total
                      %span="₹#{@total_price}"
        .payment-options
          %span
            = form.radio_button :payment_method, 'Bank Account'
            = form.label :bank_account, 'Bank Account'
            %span
              = form.radio_button :payment_method, 'Cash on Delivery'
              = form.label :cash_on_delivery, 'Cash on Delivery'
              %span
                = form.radio_button :payment_method, 'Credit or debit card'
                = form.label :credit_or_debit_card, 'Credit or debit card'
          %br
            = form.button "Continue", class: "btn btn-primary"
- content_for :js_code do
  :javascript
    $(document).ready(function() {
      $('input[type=radio][name=customer]').change(function() {
        if (this.value == 'Guest Checkout') {
          console.log("Guest Checkout");
          $(':input').val('');
        }else if (this.value == 'Register Account') {
          console.log("Register Account");
          $('#street').val();
        } 
      });
    });